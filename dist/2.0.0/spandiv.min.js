var Spandiv=Spandiv||{};!function(e){e.Resources={clockpicker:{css:"https://cdnjs.cloudflare.com/ajax/libs/clockpicker/0.0.7/bootstrap-clockpicker.min.css",js:"https://cdnjs.cloudflare.com/ajax/libs/clockpicker/0.0.7/bootstrap-clockpicker.min.js"},croppie:{css:"https://cdnjs.cloudflare.com/ajax/libs/croppie/2.6.5/croppie.min.css",js:"https://cdnjs.cloudflare.com/ajax/libs/croppie/2.6.5/croppie.min.js"},datepicker:{css:"https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.9.0/css/bootstrap-datepicker.min.css",js:"https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.9.0/js/bootstrap-datepicker.min.js"},magnificpopup:{css:"https://cdnjs.cloudflare.com/ajax/libs/magnific-popup.js/1.1.0/magnific-popup.min.css",js:"https://cdnjs.cloudflare.com/ajax/libs/magnific-popup.js/1.1.0/jquery.magnific-popup.min.js"},pace:{css:"https://cdn.jsdelivr.net/npm/pace-js@latest/pace-theme-default.min.css",js:"https://cdn.jsdelivr.net/npm/pace-js@latest/pace.min.js"},jqueryui:{js:"https://code.jquery.com/ui/1.12.1/jquery-ui.min.js"},quill:{css:"https://ajifatur.github.io/assets/external/quill/quill.snow.css",js:["https://ajifatur.github.io/assets/external/quill/quill.min.js","https://cdn.rawgit.com/kensnyder/quill-image-resize-module/3411c9a7/image-resize.min.js"]},select2:{css:"https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css",js:"https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"},sweetalert2:{css:"https://cdn.jsdelivr.net/npm/sweetalert2@11/dist/sweetalert2.min.css",js:"https://cdn.jsdelivr.net/npm/sweetalert2@11/dist/sweetalert2.min.js"}},e.EnableEverywhere=()=>{e.Pace(),e.Tooltip(),e.Popover(),e.ButtonLogout(".btn-logout","#form-logout"),e.ButtonTogglePassword(".btn-toggle-password")},e.LoadResources=(e,t=null)=>{var a=[],o=[].concat(e.css),r=[].concat(e.js);if(void 0!==e.css)for(i=0;i<o.length;i++){var n=document.createElement("link");n.rel="stylesheet",n.href=o[i],n.onload=l,document.head.appendChild(n),a.push(o[i])}if(void 0!==e.js)for(i=0;i<r.length;i++){var s=document.createElement("script");s.type="text/javascript",s.src=r[i],s.onload=l,document.body.appendChild(s),a.push(r[i])}function l(){this.readyState&&"loaded"!==this.readyState&&"complete"!==this.readyState||(void 0!==this.href&&a.splice(a.indexOf(this.href),1),void 0!==this.src&&a.splice(a.indexOf(this.src),1),a.length||(null!==t&&t(),function e(){if(o.length>0)for(i=0;i<o.length;i++){var t=document.querySelectorAll("link[href='"+o[i]+"']");if(t.length>1)for(j=1;j<t.length;j++)t[j].remove()}if(r.length>0)for(i=0;i<r.length;i++){var t=document.querySelectorAll("script[src='"+r[i]+"']");if(t.length>1)for(j=1;j<t.length;j++)t[j].remove()}}()))}},e.ButtonDelete=(t,a)=>{$(document).on("click",t,function(t){t.preventDefault();var o=$(this).data("id");$(a).find("input[name=id]").val(o),e.Confirm("Anda yakin ingin menghapus data ini?",a)})},e.ButtonDeleteBulk=(t,a)=>{$(document).on("click",t,function(t){t.preventDefault();var o=[],r=$(".dataTable .checkbox-one:checked");r.length>0?($(r).each(function(e,t){o.push($(t).data("id"))}),$(a).find("input[name=ids]").val(o),e.Confirm("Anda yakin ingin menghapus data yang terpilih?",a)):e.Alert("Tidak ada data yang terpilih!")})},e.ButtonLogout=(t,a)=>{$(document).on("click",t,function(t){t.preventDefault(),e.Confirm("Anda yakin ingin keluar?",a)})},e.ButtonTogglePassword=e=>{$(document).on("click",e,function(e){e.preventDefault();var t=$(this).parents(".input-group").find("input").attr("type"),a=$(this).parents(".input-group").find("i").attr("class");"password"===t?$(this).parents(".input-group").find("input").attr("type","text"):$(this).parents(".input-group").find("input").attr("type","password"),"bi-eye"===a?$(this).parents(".input-group").find("i").attr("class","bi-eye-slash"):$(this).parents(".input-group").find("i").attr("class","bi-eye")})},e.CheckboxOne=()=>{$(document).on("click",".dataTable .checkbox-one",function(){$(".dataTable .checkbox-all").prop("checked",!1)})},e.CheckboxAll=()=>{$(document).on("click",".dataTable .checkbox-all",function(){$(this).prop("checked")?$(".dataTable .checkbox-one").prop("checked",!0):$(".dataTable .checkbox-one").prop("checked",!1)})},e.URL=(e,t={})=>{if(0===Object.keys(t).length)return e;var a=Object.keys(t),o=Object.values(t),r="";for(i=0;i<a.length;i++)r+=a[i]+"="+o[i],i+1!==a.length&&(r+="&");return e+"?"+r},e.NumberFormat=e=>{var t=e.replace(/[^.\d]/g,"").toString().split("."),a=t[0].length%3,o=t[0].substr(0,a),r=t[0].substr(a).match(/\d{3}/gi);return r&&(o+=(separator=a?",":"")+r.join(",")),void 0!=t[1]?o+"."+t[1]:o},e.Modal=e=>bootstrap.Modal.getOrCreateInstance(document.querySelector(e)),e.Tooltip=()=>{[].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]')).map(function(e){return new bootstrap.Tooltip(e)})},e.Popover=()=>{[].slice.call(document.querySelectorAll('[data-bs-toggle="popover"]')).map(function(e){return new bootstrap.Popover(e,{html:!0})})},e.Toast=(e,t)=>{$(".toast-container").removeClass("d-none"),$(e).find(".toast-body").text(t),new bootstrap.Toast(document.querySelector(e)).show()},e.Tab=e=>bootstrap.Tab.getOrCreateInstance(document.querySelector(e)),e.Alert=t=>{e.LoadResources(e.Resources.sweetalert2,function(){Swal.fire({text:t,icon:"warning",allowOutsideClick:!1,confirmButtonText:"OK",confirmButtonColor:"#3085d6"})})},e.Confirm=(t,a)=>{e.LoadResources(e.Resources.sweetalert2,function(){Swal.fire({text:t,icon:"warning",allowOutsideClick:!1,showCancelButton:!0,confirmButtonText:"Ya",cancelButtonText:"Batal",confirmButtonColor:"#3085d6",cancelButtonColor:"#d33"}).then(e=>{e.isConfirmed&&$(a).submit()})})},e.DataTable=(t,a={})=>{var o=[{orderable:!1,targets:0},{orderable:!1,targets:-1},];!0===a.orderAll&&(o=[]);var r={left:void 0!==a.fixedColumns&&a.fixedColumns.left?a.fixedColumns.left:0,right:void 0!==a.fixedColumns&&void 0!==a.fixedColumns.right?a.fixedColumns.right:0},n=[{extend:"excel",text:'<i class="bi-file-excel"></i> Excel',className:"btn-datatable",exportOptions:{columns:"th:not(.notexport)"},autoFilter:!0}];!0===a.deleteBulk&&n.push({text:'<i class="bi-trash"></i> Hapus Terpilih',className:"btn-datatable btn-delete-bulk"});var s=$(t).DataTable({scrollX:!0,scrollCollapse:!0,processing:void 0!==a.serverSide&&a.serverSide,serverSide:void 0!==a.serverSide&&a.serverSide,ajax:void 0!==a.url&&!0===a.serverSide?a.url:null,columns:void 0!==a.columns&&!0===a.serverSide?a.columns:null,language:{lengthMenu:"Menampilkan _MENU_ data",zeroRecords:"Data tidak tersedia",info:"Menampilkan _START_ sampai _END_ dari total _TOTAL_ data",infoEmpty:"Data tidak ditemukan",infoFiltered:"(Terfilter dari total _MAX_ data)",search:"",searchPlaceholder:"Cari...",paginate:{first:"Pertama",last:"Terakhir",previous:"<",next:">"},processing:"Memproses data..."},aLengthMenu:[[10,25,50,100,-1],[10,25,50,100,"Semua"]],pageLength:void 0!==a.pageLength?a.pageLength:10,rowsGroup:void 0!==a.rowsGroup?a.rowsGroup:null,orderCellsTop:!0,fixedHeader:void 0!==a.fixedHeader&&a.fixedHeader,fixedColumns:r,columnDefs:o,order:void 0!==a.order&&!0===a.serverSide?[a.order]:[],dom:void 0!==a.buttons&&!0===a.buttons?'<"top"lfB>rt<"bottom"ip>':'<"top"lf>rt<"bottom"ip>',buttons:n});return!0===a.serverSide&&s.on("draw.dt",function(){e.Tooltip()}),e.CheckboxOne(),e.CheckboxAll(),s},e.Quill=t=>{e.LoadResources(e.Resources.quill,function(){var e;return 1===$(t).length&&(e=new Quill(t,{modules:{toolbar:[[{header:[1,2,3,4,5,6,!1]}],["bold","italic","underline","strike"],[{script:"sub"},{script:"super"}],["link","image"],[{list:"ordered"},{list:"bullet"}],[{align:[]}],[{indent:"-1"},{indent:"+1"}],[{direction:"rtl"}],[{color:[]},{background:[]}],["clean"]],imageResize:{displaySize:!0}},placeholder:"Tulis sesuatu...",theme:"snow",readOnly:!1})),e})},e.DatePicker=(t,a="dd/mm/yyyy")=>{e.LoadResources(e.Resources.datepicker,function(){return $.fn.datepicker.dates.id={days:["Minggu","Senin","Selasa","Rabu","Kamis","Jum'at","Sabtu"],daysShort:["Min","Sen","Sel","Rab","Kam","Jum","Sab"],daysMin:["Mi","Sn","Sl","Ra","Ka","Ju","Sa"],months:["Januari","Februari","Maret","April","Mei","Juni","Juli","Agustus","September","Oktober","November","Desember"],monthsShort:["Jan","Feb","Mar","Apr","Mei","Jun","Jul","Agu","Sep","Okt","Nov","Des"],today:"Hari Ini",clear:"Hapus",format:a,titleFormat:"MM yyyy",weekStart:0},$(t).datepicker({language:"id",format:a,todayHighlight:!0,autoclose:!0})})},e.DateRangePicker=(e,t={})=>$(e).daterangepicker({timePicker:!0,timePicker24Hour:!0,showDropdowns:!0,startDate:void 0!==t.start?t.start:moment().startOf("hour"),endDate:void 0!==t.end?t.end:moment().startOf("hour").add(48,"hour"),locale:{format:"DD/MM/YYYY HH:mm",applyLabel:"OK",cancelLabel:"Batal",fromLabel:"Dari",toLabel:"Sampai",customRangeLabel:"Kustom",daysOfWeek:["Mi","Sn","Sl","Ra","Ka","Ju","Sa"],monthNames:["Januari","Februari","Maret","April","Mei","Juni","Juli","Agustus","September","Oktober","November","Desember"]}}),e.ClockPicker=t=>{e.LoadResources(e.Resources.clockpicker,function(){return $(t).clockpicker({autoclose:!0})})},e.Select2=(t,a={})=>{e.LoadResources(e.Resources.select2,function(){var e={width:"resolve",allowClear:!0,placeholder:"--Pilih--",language:{noResults:function(){if(void 0===a||!0!=a.enableAddOption)return"Tidak ditemukan.";var e=$(".select2-search__field").val();return'<span id="select2-add-option" data-keyword="'+e+'">Tambahkan data <b><u>'+e+"</u></b></span>"}},escapeMarkup:function(e){return e}},o=$(t).select2(e);return void 0!==a&&!0==a.enableAddOption&&$(document).on("click",".select2-results__option.select2-results__message",function(a){a.preventDefault();var o=$(this).find("#select2-add-option").data("keyword"),r=$(t).data("url"),n=$(t).data("token"),s=$(t).attr("multiple");$.ajax({type:"post",url:r,data:{_token:n,keyword:o},success:function(){if($(t).find("option").last().after('<option value="'+o+'">'+o+"</option>"),$(t).select2("close"),void 0!==s&&!1!==s){var a=$(t).val()+","+o;$.each(a.split(","),function(e,a){$(t).find("option[value='"+a+"']").prop("selected",!0)})}else $(t).val(o);$(t).select2(e).trigger("change")}})}),void 0!==a&&!0==a.orderByClicked&&$(t).on("select2:select",function(e){var t=$(e.params.data.element);t.detach(),$(this).append(t),$(this).trigger("change")}),$(t).on("select2:open",function(e){document.querySelector(".select2-search__field").focus()}),o})},e.Select2ServerSide=(t,a)=>{$(window).on("load",function(){var e=a.value;$.ajax({type:"get",url:a.url,success:function(o){for(var r='<option value="" disabled selected>--Pilih--</option>',n=0;n<o.length;n++){var s=e===o[n][a.valueProp]?"selected":"";void 0!==a.bracketProp?r+='<option value="'+o[n][a.valueProp]+'" '+s+">"+o[n][a.nameProp]+" ("+o[n][a.bracketProp]+")</option>":r+='<option value="'+o[n][a.valueProp]+'" '+s+">"+o[n][a.nameProp]+"</option>"}$(t).html(r)}})});var o=void 0!==a.enableAddOption&&a.enableAddOption,r=void 0!==a.orderByClicked&&a.orderByClicked;return e.Select2(t,{enableAddOption:o,orderByClicked:r})},e.Sortable=t=>{var a=$("input[name=_token]").val();e.LoadResources(e.Resources.jqueryui,function(){var e=$(t).sortable({items:"> div:not(.ui-state-disabled)",placeholder:"ui-state-highlight",start:function(e,t){$(this).find(".ui-state-highlight").css({height:$(t.item).outerHeight(),"margin-bottom":$(this).find(".ui-sortable-handle").css("margin-bottom")})},update:function(e,t){var o=$(this).data("url"),r=$(this).children(".ui-sortable-handle"),n=[];$(r).each(function(e,t){n.push($(t).data("id"))}),$.ajax({type:"post",url:o,data:{_token:a,ids:n},success:function(e){Spandiv.Toast("#toast-sort",e)}})}});return $(t).disableSelection(),e})},e.Pace=()=>{e.LoadResources(e.Resources.pace)},e.Croppie=(e,t)=>$(e).croppie({viewport:{width:t.width,height:t.height,type:"square"==t.type||"circle"==t.type?t.type:"square"},boundary:{width:t.width,height:t.height}}),e.CroppieBindFromURL=(e,t)=>{if(t.files&&t.files[0]){var a=new FileReader;a.onload=function(t){e.croppie("bind",{url:t.target.result})},a.readAsDataURL(t.files[0]),t.value=null}},e.CroppieSubmit=(e,t)=>{e.croppie("result",{type:"base64",circle:!1}).then(function(e){$(t).find("input[name=image]").val(e),$(t).submit()})},e.MagnificPopup=t=>{e.LoadResources(e.Resources.magnificpopup,function(){return $(t).magnificPopup({type:"image",gallery:{enabled:!0},image:{titleSrc:"title"}})})},e.HighchartsPie=(e,t)=>Highcharts.chart(e,{chart:{plotBackgroundColor:null,plotBorderWidth:null,plotShadow:!1,type:"pie"},title:{text:t.title,align:void 0!==t.titleAlign?t.titleAlign:"center"},subtitle:{text:void 0!==t.subtitle?t.subtitle:"",align:void 0!==t.titleAlign?t.titleAlign:"center"},tooltip:{headerFormat:"",pointFormat:'<span style="color:{point.color}">●</span> <b> {point.name}</b><br/>{series.name}: <b>{point.y}'+(void 0!==t.valueSuffix?" "+t.valueSuffix:"")+"<b> ({point.percentage:.0f}%)"},accessibility:{enabled:!1},plotOptions:{pie:{allowPointSelect:!0,cursor:"pointer",dataLabels:{enabled:!0,format:"<b>{point.name}</b>: {point.y}"+(void 0!==t.valueSuffix?" "+t.valueSuffix:"")}}},series:[{name:t.seriesName,colorByPoint:!0,data:t.data}]}),e.EnableEverywhere()}(Spandiv);