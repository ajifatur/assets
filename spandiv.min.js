var Spandiv=Spandiv||{};!function(a){a.Resources={clockpicker:{css:"https://cdnjs.cloudflare.com/ajax/libs/clockpicker/0.0.7/bootstrap-clockpicker.min.css",js:"https://cdnjs.cloudflare.com/ajax/libs/clockpicker/0.0.7/bootstrap-clockpicker.min.js"},croppie:{css:"https://cdnjs.cloudflare.com/ajax/libs/croppie/2.6.5/croppie.min.css",js:"https://cdnjs.cloudflare.com/ajax/libs/croppie/2.6.5/croppie.min.js"},datepicker:{css:"https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.9.0/css/bootstrap-datepicker.min.css",js:"https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.9.0/js/bootstrap-datepicker.min.js"},daterangepicker:{css:"https://cdn.jsdelivr.net/npm/daterangepicker/daterangepicker.min.css",js:["https://cdn.jsdelivr.net/momentjs/latest/moment.min.js","https://cdn.jsdelivr.net/npm/daterangepicker/daterangepicker.min.js"]},pace:{css:"https://cdn.jsdelivr.net/npm/pace-js@latest/pace-theme-default.min.css",js:"https://cdn.jsdelivr.net/npm/pace-js@latest/pace.min.js"},jqueryui:{js:"https://code.jquery.com/ui/1.12.1/jquery-ui.min.js"},quill:{css:"https://campusdigital.id/assets/plugins/quill/quill.snow.css",js:["https://campusdigital.id/assets/plugins/quill/quill.min.js","https://cdn.rawgit.com/kensnyder/quill-image-resize-module/3411c9a7/image-resize.min.js"]},select2:{css:"https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css",js:"https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"},sweetalert2:{css:"https://cdn.jsdelivr.net/npm/sweetalert2@11/dist/sweetalert2.min.css",js:"https://cdn.jsdelivr.net/npm/sweetalert2@11/dist/sweetalert2.min.js"}},a.EnableEverywhere=()=>{a.Pace(),a.Tooltip(),a.Popover(),a.ButtonLogout(".btn-logout","#form-logout"),a.ButtonTogglePassword(".btn-toggle-password")},a.LoadResources=(a,g=null)=>{var f=[],d=[].concat(a.css),e=[].concat(a.js);if(void 0!==a.css)for(i=0;i<d.length;i++){var b=document.createElement("link");b.rel="stylesheet",b.href=d[i],b.onload=h,document.head.appendChild(b),f.push(d[i])}if(void 0!==a.js)for(i=0;i<e.length;i++){var c=document.createElement("script");c.type="text/javascript",c.src=e[i],c.onload=h,document.body.appendChild(c),f.push(e[i])}function h(){this.readyState&&"loaded"!==this.readyState&&"complete"!==this.readyState||(void 0!==this.href&&f.splice(f.indexOf(this.href),1),void 0!==this.src&&f.splice(f.indexOf(this.src),1),f.length||(null!==g&&g(),i()))}function i(){if(d.length>0)for(i=0;i<d.length;i++){var a=document.querySelectorAll("link[href='"+d[i]+"']");if(a.length>1)for(j=1;j<a.length;j++)a[j].remove()}if(e.length>0)for(i=0;i<e.length;i++){var a=document.querySelectorAll("script[src='"+e[i]+"']");if(a.length>1)for(j=1;j<a.length;j++)a[j].remove()}}},a.ButtonDelete=(b,c)=>{$(document).on("click",b,function(b){b.preventDefault();var d=$(this).data("id");$(c).find("input[name=id]").val(d),a.SwalWarning("Anda yakin ingin menghapus data ini?",c)})},a.ButtonDeleteBulk=(b,c)=>{$(document).on("click",b,function(d){d.preventDefault();var e=[],b=$(".dataTable .checkbox-one:checked");b.length>0?($(b).each(function(b,a){e.push($(a).data("id"))}),$(c).find("input[name=ids]").val(e),a.SwalWarning("Anda yakin ingin menghapus data yang terpilih?",c)):a.SwalBasic("Tidak ada data yang terpilih!")})},a.ButtonLogout=(b,c)=>{$(document).on("click",b,function(b){b.preventDefault(),a.SwalWarning("Anda yakin ingin keluar?",c)})},a.ButtonTogglePassword=a=>{$(document).on("click",a,function(a){a.preventDefault();var b=$(this).parents(".input-group").find("input").attr("type"),c=$(this).parents(".input-group").find("i").attr("class");"password"===b?$(this).parents(".input-group").find("input").attr("type","text"):$(this).parents(".input-group").find("input").attr("type","password"),"bi-eye"===c?$(this).parents(".input-group").find("i").attr("class","bi-eye-slash"):$(this).parents(".input-group").find("i").attr("class","bi-eye")})},a.CheckboxOne=()=>{$(document).on("click",".dataTable .checkbox-one",function(){$(".dataTable .checkbox-all").prop("checked",!1)})},a.CheckboxAll=()=>{$(document).on("click",".dataTable .checkbox-all",function(){$(this).prop("checked")?$(".dataTable .checkbox-one").prop("checked",!0):$(".dataTable .checkbox-one").prop("checked",!1)})},a.URL=(d,a={})=>{if(0===Object.keys(a).length)return d;var b=Object.keys(a),e=Object.values(a),c="";for(i=0;i<b.length;i++)c+=b[i]+"="+e[i],i+1!==b.length&&(c+="&");return d+"?"+c},a.NumberFormat=e=>{var a=e.replace(/[^.\d]/g,"").toString().split("."),b=a[0].length%3,c=a[0].substr(0,b),d=a[0].substr(b).match(/\d{3}/gi);return d&&(c+=(separator=b?",":"")+d.join(",")),void 0!=a[1]?c+"."+a[1]:c},a.Modal=a=>bootstrap.Modal.getOrCreateInstance(document.querySelector(a)),a.Tooltip=()=>{[].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]')).map(function(a){return new bootstrap.Tooltip(a)})},a.Popover=()=>{[].slice.call(document.querySelectorAll('[data-bs-toggle="popover"]')).map(function(a){return new bootstrap.Popover(a,{html:!0})})},a.Toast=(a,b)=>{$(".toast-container").removeClass("d-none"),$(a).find(".toast-body").text(b),new bootstrap.Toast(document.querySelector(a)).show()},a.Tab=a=>bootstrap.Tab.getOrCreateInstance(document.querySelector(a)),a.SwalBasic=b=>{a.LoadResources(a.Resources.sweetalert2,function(){Swal.fire({text:b,icon:"warning",allowOutsideClick:!1,confirmButtonText:"OK",confirmButtonColor:"#3085d6"})})},a.SwalWarning=(b,c)=>{a.LoadResources(a.Resources.sweetalert2,function(){Swal.fire({text:b,icon:"warning",allowOutsideClick:!1,showCancelButton:!0,confirmButtonText:"Ya",cancelButtonText:"Batal",confirmButtonColor:"#3085d6",cancelButtonColor:"#d33"}).then(a=>{a.isConfirmed&&$(c).submit()})})},a.DataTable=(e,b={})=>{var c=[{orderable:!1,targets:0},{orderable:!1,targets:-1},];!0===b.orderAll&&(c=[]);var d=$(e).DataTable({processing:void 0!==b.serverSide&&b.serverSide,serverSide:void 0!==b.serverSide&&b.serverSide,ajax:void 0!==b.url&& !0===b.serverSide?b.url:null,columns:void 0!==b.columns&& !0===b.serverSide?b.columns:null,language:{lengthMenu:"Menampilkan _MENU_ data",zeroRecords:"Data tidak tersedia",info:"Menampilkan _START_ sampai _END_ dari total _TOTAL_ data",infoEmpty:"Data tidak ditemukan",infoFiltered:"(Terfilter dari total _MAX_ data)",search:"Cari:",paginate:{first:"Pertama",last:"Terakhir",previous:"<",next:">"},processing:"Memproses data..."},aLengthMenu:[[10,25,50,100,-1],[10,25,50,100,"Semua"]],pageLength:void 0!==b.pageLength?b.pageLength:10,rowsGroup:void 0!==b.rowsGroup?b.rowsGroup:null,orderCellsTop:!0,columnDefs:c,order:void 0!==b.order&& !0===b.serverSide?[b.order]:[]});return!0===b.serverSide&&d.on("draw.dt",function(){a.Tooltip()}),a.CheckboxOne(),a.CheckboxAll(),d},a.Quill=b=>{a.LoadResources(a.Resources.quill,function(){var a;return 1===$(b).length&&(a=new Quill(b,{modules:{toolbar:[[{header:[1,2,3,4,5,6,!1]}],["bold","italic","underline","strike"],[{script:"sub"},{script:"super"}],["link","image"],[{list:"ordered"},{list:"bullet"}],[{align:[]}],[{indent:"-1"},{indent:"+1"}],[{direction:"rtl"}],[{color:[]},{background:[]}],["clean"]],imageResize:{displaySize:!0}},placeholder:"Tulis sesuatu...",theme:"snow",readOnly:!1})),a})},a.DatePicker=b=>{a.LoadResources(a.Resources.datepicker,function(){return $.fn.datepicker.dates.id={days:["Minggu","Senin","Selasa","Rabu","Kamis","Jum'at","Sabtu"],daysShort:["Min","Sen","Sel","Rab","Kam","Jum","Sab"],daysMin:["Mi","Sn","Sl","Ra","Ka","Ju","Sa"],months:["Januari","Februari","Maret","April","Mei","Juni","Juli","Agustus","September","Oktober","November","Desember"],monthsShort:["Jan","Feb","Mar","Apr","Mei","Jun","Jul","Agu","Sep","Okt","Nov","Des"],today:"Hari Ini",clear:"Hapus",format:"dd/mm/yyyy",titleFormat:"MM yyyy",weekStart:0},$(b).datepicker({language:"id",format:"dd/mm/yyyy",todayHighlight:!0,autoclose:!0})})},a.DateRangePicker=(b,c={})=>{a.LoadResources(a.Resources.daterangepicker,function(){return $(b).daterangepicker({timePicker:!0,timePicker24Hour:!0,showDropdowns:!0,startDate:void 0!==c.start?c.start:moment().startOf("hour"),endDate:void 0!==c.end?c.end:moment().startOf("hour").add(48,"hour"),locale:{format:"DD/MM/YYYY HH:mm"}})})},a.ClockPicker=b=>{a.LoadResources(a.Resources.clockpicker,function(){return $(b).clockpicker({autoclose:!0})})},a.Select2=b=>{a.LoadResources(a.Resources.select2,function(){return $(b).select2({width:"resolve",allowClear:!0})})},a.Select2ServerSide=(b,c)=>($(window).on("load",function(){var a=c.value;$.ajax({type:"get",url:c.url,success:function(e){for(var f='<option value="" disabled selected>--Pilih--</option>',d=0;d<e.length;d++){var g=a===e[d][c.valueProp]?"selected":"";void 0!==c.bracketProp?f+='<option value="'+e[d][c.valueProp]+'" '+g+">"+e[d][c.nameProp]+" ("+e[d][c.bracketProp]+")</option>":f+='<option value="'+e[d][c.valueProp]+'" '+g+">"+e[d][c.nameProp]+"</option>"}$(b).html(f)}})}),a.Select2(b)),a.Sortable=b=>{var c=$("input[name=_token]").val();a.LoadResources(a.Resources.jqueryui,function(){var a=$(b).sortable({items:"> div:not(.ui-state-disabled)",placeholder:"ui-state-highlight",start:function(b,a){$(this).find(".ui-state-highlight").css({height:$(a.item).outerHeight(),"margin-bottom":$(this).find(".ui-sortable-handle").css("margin-bottom")})},update:function(e,f){var a=$(this).data("url"),b=$(this).children(".ui-sortable-handle"),d=[];$(b).each(function(b,a){d.push($(a).data("id"))}),$.ajax({type:"post",url:a,data:{_token:c,ids:d},success:function(a){Spandiv.Toast("#toast-sort",a)}})}});return $(b).disableSelection(),a})},a.Pace=()=>{a.LoadResources(a.Resources.pace)},a.Croppie=(b,a)=>$(b).croppie({viewport:{width:a.width,height:a.height,type:"square"==a.type||"circle"==a.type?a.type:"square"},boundary:{width:a.width,height:a.height}}),a.CroppieBindFromURL=(c,a)=>{if(a.files&&a.files[0]){var b=new FileReader;b.onload=function(a){c.croppie("bind",{url:a.target.result})},b.readAsDataURL(a.files[0]),a.value=null}},a.CroppieSubmit=(a,b)=>{a.croppie("result",{type:"base64",circle:!1}).then(function(a){$(b).find("input[name=image]").val(a),$(b).submit()})},a.EnableEverywhere()}(Spandiv)